{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/alert.svg","../src/img/caution.svg","../src/img/inform.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function fetchImages(searchDescription, page, limit) {\n\n    const response = await axios.get('https://pixabay.com/api/', {\n    \n      params: {\n      key: '44326586-33d8e1982942c3360c5af8426',\n      q: encodeURIComponent(searchDescription),\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: limit,\n      },\n    });\n    return response.data;\n};\n\n    ","export function renderMarkup(images) {\n    const markup = images.hits\n      .map(image => {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          <div class=\"cards-wrapper\">\n          <div class=\"card-wrapper\">\n            <strong>Likes</strong>\n            <p>${image.likes}</p>\n          </div>\n          <div class=\"card-wrapper\">\n            <strong>Views</strong>\n            <p>${image.views}</p>\n          </div>\n          <div class=\"card-wrapper\">\n            <strong>Comments</strong>\n            <p>${image.comments}</p>\n          </div>\n          <div class=\"card-wrapper\">\n            <strong>Downloads</strong>\n            <p>${image.downloads}</p>\n          </div>\n        </div>\n        </a>\n      </li>`;\n      })\n      .join('');\n      return markup;\n  }","export default \"__VITE_ASSET__0a4fe6ce__\"","export default \"__VITE_ASSET__02852ca5__\"","export default \"__VITE_ASSET__0f019048__\"","import { fetchImages } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\n\nimport alert from './img/alert.svg';\nimport caution from './img/caution.svg';\nimport informSvg from './img/inform.svg'; \n\n\n// SimpleLightBox library\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// iziToast library\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormElem = document.querySelector('.search-form');\nconst searchInputElem = document.querySelector('.search-input');\nconst standBySpanElem = document.querySelector('.loader');\nconst galleryElem = document.querySelector('.gallery');\nconst loadBtnElem = document.querySelector('.load-btn');\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst limit = 15;\nlet page = 1;\nlet totalPages = 0;\nlet requestValue = '';\n\nsearchFormElem.addEventListener('submit', async event => {\n  event.preventDefault();\n  if (!searchInputElem.value.trim()) {\n    searchFormElem.reset();\n    return;\n  }\ntry {\n  page = 1;\n  requestValue = '';\n  loadBtnElem.classList.add('visually-hidden');\n  galleryElem.innerHTML = '';\n  standBySpanElem.classList.remove('visually-hidden');\n  const fetchData = await fetchImages(\n    searchInputElem.value.trim(),\n    page,\n    limit\n  );\n        if (!fetchData.total) {\n        standBySpanElem.classList.remove('visually-hidden');\n        iziToast.error({\n          iconUrl: alert,\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n    standBySpanElem.classList.add('visually-hidden');\n    galleryElem.insertAdjacentHTML('beforeend', renderMarkup(fetchData));\n    gallery.refresh();\n    totalPages = Math.ceil(fetchData.totalHits / limit);\n    requestValue = searchInputElem.value.trim();\n    if (page < totalPages) {\n      loadBtnElem.classList.remove('visually-hidden');\n    }\n  }\n    catch (error) {\n      standBySpanElem.classList.add('visually-hidden');\n      iziToast.warning({\n        iconUrl: caution,\n        message: `${error}`,\n        position: 'topRight',\n        timeout: 5000,\n      });\n    }\n  searchFormElem.reset();\n});\n\nloadBtnElem.addEventListener('click', async event => {\n  page += 1;\n  if (page === totalPages) {\n    iziToast.info({\n      iconUrl: informSvg,\n      position: 'topRight',\n      backgroundColor: '#09f',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    standBySpanElem.classList.add('visually-hidden');\n    loadBtnElem.classList.add('visually-hidden');\n  }\n  try {\n    standBySpanElem.classList.remove('visually-hidden');\n    const fetchData = await fetchImages(requestValue, page, limit);\n    standBySpanElem.classList.add('visually-hidden');\n    galleryElem.insertAdjacentHTML('beforeend', renderMarkup(fetchData));\n    gallery.refresh();\n    window.scrollBy({\n      top: galleryElem.firstChild.getBoundingClientRect().height * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    standBySpanElem.classList.add('visually-hidden');\n    iziToast.warning({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["fetchImages","searchDescription","page","limit","axios","renderMarkup","images","image","alert","caution","informSvg","searchFormElem","searchInputElem","standBySpanElem","galleryElem","loadBtnElem","gallery","SimpleLightbox","totalPages","requestValue","event","fetchData","iziToast","error"],"mappings":"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"}